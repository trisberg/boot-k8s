= Spring Boot Apps on K8s
Doc Writer <doc.writer@asciidoctor.org>
v0, 2017-08-13
:doctype: book
:toc:
:toclevels: 3
:attributes: allow-uri-read

== Install Kubernetes and kubectl CLI

. Install Minikube from https://kubernetes.io/docs/tasks/tools/install-minikube/
+
Then, start Minikube:
+
	minikube start
+
. Install `kubectl` from https://kubernetes.io/docs/tasks/tools/install-kubectl/
+
Use `kubectl` to check the versions:
+
	kubectl version

== Introducing kubectl, Deployments, Services

=== Kubernetes overview
* pod/containers, nodes, master, API, scheduler
* kubectl - common commands
* minikube - quick install

=== Boot app basics
* create a new app project
* modify and build app
* build and push Docker image
* run app with kubectl commands
* show enviroinment variables
* show running yaml config files

=== Demo 1 - Simple Hello Spring Boot/Kubernetes app deployment

include::demo-hello.adoc[]

== Microservice Architecture Concerns 

Common microservice system concerns:

* Externalized configuration
* Inter Service Communication
  - REST, gRPC, and messaging
* Security and Encryption
* Load balancing and Routing
* Service discovery
* Stability and Availability
  - Circuit breaker
  - Timeout and Retries
  - Rate limiting
* Monitoring and Metrics
* Distributed Tracing

=== Externalized configuration with ConfigMap and Secrets

* Connecting to services running on k8s

* Using configuration files do define k8s resources

* Using Maven plug-in to build Docker image

* Use `org.springframework.cloud:spring-cloud-starter-kubernetes` for ConfigMaps and Secrets

==== Demo 2 - Simple REST Repository App

include::demo-actors.adoc[]

=== Service Discovery - Eureka

=== Circuit-breaker - Hystrix

=== Routing / Load Balancing - Zuul

=== Service Mesh - Istio

== Packaging - Helm

include::demo-helm.adoc[]

== Connecting to Google Cloud Platform services

* Enable the Cloud SQL API

* Create a MySQL Database (2nd Generation)

* Create a Service Account

* Use a Side Car Proxy

=== Demo 3 - Simple REST Repository App using Cloud SQL for MySQL

include::demo-cloud-sql.adoc[]

== New Developments

=== Open Service API / Kubernetes Service Catalog

=== PKS / Kubo
